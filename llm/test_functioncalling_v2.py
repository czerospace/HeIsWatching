#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
è¯¥è„šæœ¬æ ¹æ®æä¾›çš„æµ‹è¯•æ•°æ®ç”Ÿæˆï¼Œç”¨äºæµ‹è¯•ç‰¹å®šçš„function callingåœºæ™¯
æµ‹è¯•æ¨¡å‹åœ°å€: http://192.168.101.185:8017/v1/chat/completions
æµ‹è¯•æ¨¡å‹åç§°: qwen3-1.7b
"""

import json
import requests

# æ¨¡å‹APIé…ç½®
API_URL = "http://10.2.69.242:18080/v1/chat/completions"
MODEL_NAME = "qwen3-8b"

def test_weather_scenario():
    """
    æµ‹è¯•å¤©æ°”æŸ¥è¯¢åœºæ™¯çš„function calling
    æ ¹æ®æä¾›çš„æµ‹è¯•æ•°æ®æ„é€ è¯·æ±‚
    """
    # æ„é€ èŠå¤©æ¶ˆæ¯å’Œå·¥å…·
    messages = [
        {
            "content": "ä½ æ˜¯æ™ºèƒ½å¤©æ°”åŠ©æ‰‹ï¼Œä¸“æ³¨äºé€šè¿‡å·¥å…·æŸ¥è¯¢å‡†ç¡®å¤©æ°”æ•°æ®ï¼Œè§£å†³ç”¨æˆ·å¤©æ°”ç›¸å…³é—®é¢˜ï¼Œä¸¥æ ¼éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š\n\n1. æ ¸å¿ƒèŒè´£ï¼šå¤©æ°”æ•°æ®å¿…é¡»é€šè¿‡ `get_weather` å·¥å…·è·å–ï¼Œç»å¯¹ä¸èƒ½å‡­ç©ºæé€ ï¼›æ‰€æœ‰æŸ¥è¯¢éƒ½å¿…é¡»è§¦å‘ Function Callingï¼Œç¦æ­¢ç›´æ¥å›å¤å¤©æ°”ç»“æœã€‚\n\n2. å‚æ•°é»˜è®¤å€¼è§„åˆ™ï¼ˆä¼˜å…ˆçº§ï¼šå†å²å¤ç”¨ > å›ºå®šé»˜è®¤ï¼‰ï¼š\n   - åŒºåŸŸï¼ˆareaï¼‰ï¼šä¼˜å…ˆå¤ç”¨ç”¨æˆ·å†å²å¯¹è¯ä¸­æ˜ç¡®æŒ‡å®šçš„åŸå¸‚ â†’ æ— å†å²è®°å½•åˆ™é»˜è®¤ æ·±åœ³ï¼›\n   - æ—¶é—´ï¼ˆtimeï¼‰ï¼šä¼˜å…ˆå¤ç”¨ç”¨æˆ·å†å²å¯¹è¯ä¸­æ˜ç¡®æŒ‡å®šçš„æ—¶é—´ï¼ˆæ”¯æŒã€Œä»Šå¤©/æ˜å¤©/æœªæ¥7å¤©ã€ï¼‰â†’ æ— å†å²è®°å½•åˆ™é»˜è®¤ã€Œä»Šå¤©ã€ï¼›\n\n3. Function Calling è§¦å‘è¦æ±‚ï¼š\n   - æ— è®ºç”¨æˆ·è¾“å…¥æ˜¯å¦åŒ…å«åŒºåŸŸ/æ—¶é—´ï¼Œåªè¦æœªæ˜ç¡®æŒ‡å®šï¼Œç›´æ¥ç”¨ä¸Šè¿°é»˜è®¤å€¼è¡¥å…¨ `get_weather` çš„æ‰€æœ‰å‚æ•°ï¼›\n   - æ— éœ€å‘ç”¨æˆ·è¿½é—®ä»»ä½•ç¼ºå¤±å‚æ•°ï¼ˆåŒ…æ‹¬åŒºåŸŸã€æ—¶é—´ï¼‰ï¼Œç›´æ¥ç”Ÿæˆå®Œæ•´çš„å‚æ•°åˆ—è¡¨è°ƒç”¨å·¥å…·ï¼›\n   - ç”Ÿæˆçš„å‡½æ•°è°ƒç”¨å‚æ•°ï¼ˆargumentsï¼‰å¿…é¡»åŒ…å« 'area' 'time'ä¸¤ä¸ªå­—æ®µï¼Œç¼ºä¸€ä¸å¯ï¼ˆç”¨é»˜è®¤å€¼è¡¥å…¨ç¼ºå¤±é¡¹ï¼‰ã€‚\n\n4. å›å¤æ ¼å¼ä¸äº¤äº’è¦æ±‚ï¼š\n   - è°ƒç”¨å·¥å…·å‰ï¼Œæ— éœ€é¢å¤–å’Œç”¨æˆ·ç¡®è®¤ï¼Œç›´æ¥ç”Ÿæˆ Function Calling æ ¼å¼ï¼ˆåŒ…å«å®Œæ•´å‚æ•°ï¼‰ï¼›\n   - è®°å½•ç”¨æˆ·å†å²æ˜ç¡®æŒ‡å®šçš„åŒºåŸŸ/æ—¶é—´ï¼Œåç»­æŸ¥è¯¢é»˜è®¤å¤ç”¨ï¼ˆä¾‹ï¼šç”¨æˆ·ä¹‹å‰è¯´è¿‡ã€ŒæŸ¥ä¸Šæµ·çš„å¤©æ°”ã€ï¼Œä¸‹æ¬¡ç”¨æˆ·è¯´ã€ŒæŸ¥æ˜å¤©çš„ã€ï¼Œé»˜è®¤ç”¨ã€Œä¸Šæµ·+æ˜å¤©ã€ï¼‰ã€‚\n   - æ ¹æ®å·¥å…·è·å–åˆ°çš„å¤©æ°”æ•°æ®ï¼Œç”¨äº²åˆ‡ç”ŸåŠ¨çš„è‡ªç„¶è¯­è¨€å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚\n   - é¿å…è¾“å‡ºç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚emojiã€ç‰¹æ®Šç¬¦å·ç­‰ã€‚\n\n5. ç¦æ­¢è§„åˆ™ï¼š\n   - ç¦æ­¢å› å‚æ•°ç¼ºå¤±æ‹’ç»è°ƒç”¨å·¥å…·ï¼›\n   - ç¦æ­¢ä¿®æ”¹å·¥å…·å®šä¹‰çš„å‚æ•°å­—æ®µï¼ˆå¦‚ area ä¸èƒ½æ”¹ä¸ºã€ŒåŸå¸‚ã€ï¼Œtime ä¸èƒ½æ”¹ä¸ºã€Œæ—¥æœŸã€ï¼‰ã€‚\n\n# ç³»ç»Ÿæ—¶é—´\n    2025-12-07 16:14:45 æ˜ŸæœŸæ—¥\n# é»˜è®¤åœ°å€\n    æ·±åœ³",
            "role": "system"
        },
        {
            "content": "å¤©æ°”æ€ä¹ˆæ ·",
            "role": "user"
        },
        {
            "content": "",
            "role": "assistant",
            "tool_calls": [
                {
                    "function": {
                        "arguments": "{\"area\": \"æ·±åœ³\", \"time\": \"ä»Šå¤©\"}",
                        "name": "query_weather"
                    },
                    "id": "chatcmpl-tool-91c3afb8b48e47d6a0e7644ff67cb8ba",
                    "index": 0,
                    "type": "function"
                }
            ]
        },
        {
            "content": "{\"åŸå¸‚\":\"æ·±åœ³å¸‚\",\"å¤©æ°”å®å†µ\":[{\"å¤©æ°”æƒ…å†µ\":\"æ™´\",\"æ—¥æœŸ\":\"2025-12-07\",\"æ¸©åº¦\":\"24â„ƒ\",\"æ¹¿åº¦\":\"55%\",\"é£åŠ›\":\"3\",\"é£å‘\":\"ä¸œåŒ—é£çº§\"}],\"å¤©æ°”é¢„æŠ¥\":[{\"æ—¥æœŸ\":\"2025-12-07\",\"æ™šä¸Šå¤©æ°”æƒ…å†µ\":\"æ™´\",\"æ™šä¸Šæ¸©åº¦\":\"16â„ƒ\",\"æ™šä¸Šé£åŠ›\":\"1çº§\",\"æ™šä¸Šé£å‘\":\"åŒ—é£\",\"ç™½å¤©å¤©æ°”æƒ…å†µ\":\"æ™´\",\"ç™½å¤©æ¸©åº¦\":\"25â„ƒ\",\"ç™½å¤©é£åŠ›\":\"1çº§\",\"ç™½å¤©é£å‘\":\"åŒ—é£\"}],\"ç©ºæ°”è´¨é‡\":[{\"PM10æµ“åº¦\":\"51Î¼g/mÂ³\",\"PM2.5æµ“åº¦\":\"47Î¼g/mÂ³\",\"ä¸€æ°§åŒ–ç¢³æµ“åº¦\":\"8mg/mÂ³\",\"äºŒæ°§åŒ–æ°®æµ“åº¦\":\"10Î¼g/mÂ³\",\"äºŒæ°§åŒ–ç¡«æµ“åº¦\":\"3Î¼g/mÂ³\",\"æ—¥æœŸ\":\"2025-12-07\",\"ç©ºæ°”è´¨é‡æŒ‡æ•°ï¼ˆAQIï¼‰\":51,\"ç©ºæ°”è´¨é‡ç­‰çº§\":\"è‰¯\",\"è‡­æ°§æµ“åº¦\":\"38Î¼g/mÂ³\"}]}",
            "role": "tool",
            "tool_call_id": "chatcmpl-tool-91c3afb8b48e47d6a0e7644ff67cb8ba"
        },
        {
            "content": "ä»Šå¤©æ·±åœ³çš„å¤©æ°”æ™´æœ—ï¼Œæ¸©åº¦åœ¨24â„ƒå·¦å³ï¼Œæ¹¿åº¦55%ï¼Œé£åŠ›3çº§ï¼Œä¸œåŒ—é£ã€‚ç™½å¤©å’Œæ™šä¸Šéƒ½æ™´ï¼Œæ¸©åº¦å˜åŒ–ä¸å¤§ï¼Œç™½å¤©25â„ƒï¼Œæ™šä¸Š16â„ƒã€‚ç©ºæ°”è´¨é‡è‰¯å¥½ï¼ŒAQIä¸º51ï¼Œå±äºè‰¯ã€‚å»ºè®®æ‚¨å¤–å‡ºæ—¶æ³¨æ„ä¿æš–ï¼Œé€‚å½“å¢æ·»è¡£ç‰©ã€‚",
            "role": "assistant"
        },
        {
            "content": "æ˜å¤©ä¼šä¸‹é›¨å—",
            "role": "user"
        }
    ]

    tools = [
        {
            "function": {
                "description": "å½“ä½ æƒ³æŸ¥è¯¢å¤©æ°”æ—¶éå¸¸æœ‰ç”¨",
                "name": "query_weather",
                "parameters": {
                    "properties": {
                        "area": {
                            "default": "åŒ—äº¬",
                            "description": "åŒºåŸŸåç§°ï¼Œä¾‹å¦‚ï¼šåŒ—äº¬ã€åŒ—äº¬æœé˜³ã€æœé˜³åŒºã€åŒ—äº¬å¸‚æœé˜³åŒºç­‰",
                            "type": "string"
                        },
                        "time": {
                            "default": "ä»Šå¤©",
                            "description": "æ—¶é—´æè¿°å­—ç¬¦ä¸²ï¼Œä»ç”¨æˆ·è¾“å…¥ä¸­åŸæ ·æå–ï¼Œä¾‹å¦‚ï¼šä»Šå¤©ã€æ˜å¤©ã€åå¤©ã€æ˜åä¸¤å¤©ã€æœªæ¥ä¸‰å¤©ã€å‘¨æœ«ã€ä¸‹å‘¨ä¸€ã€8å·ã€ä¸‹å‘¨ä¸€åˆ°å‘¨ä¸‰ç­‰",
                            "type": "string"
                        }
                    },
                    "required": [],
                    "type": "object"
                }
            },
            "type": "function"
        }
    ]

    # æ„é€ è¯·æ±‚æ•°æ®
    data = {
        "model": MODEL_NAME,
        "messages": messages,
        "tools": tools,
        "temperature": 0.3,
        "top_p": 0.8,
        "max_tokens": 1000,
        "parallel_tool_calls": False
    }

    try:
        print("æ­£åœ¨å‘é€è¯·æ±‚åˆ°æ¨¡å‹API...")
        # å‘é€POSTè¯·æ±‚åˆ°æ¨¡å‹API
        response = requests.post(
            API_URL,
            headers={"Content-Type": "application/json"},
            data=json.dumps(data, ensure_ascii=False).encode('utf-8'),
            timeout=30
        )
        
        print(f"æ”¶åˆ°APIå“åº”ï¼ŒçŠ¶æ€ç : {response.status_code}")

        # è§£æå“åº”
        result = response.json()
        print("=== å¤©æ°”æŸ¥è¯¢åœºæ™¯æµ‹è¯• ===")
        print(json.dumps(result, indent=2, ensure_ascii=False))

        # æ£€æŸ¥æ˜¯å¦æœ‰å·¥å…·è°ƒç”¨
        if "choices" in result and len(result["choices"]) > 0:
            choice = result["choices"][0]
            message = choice.get("message", {})
            if "tool_calls" in message and message["tool_calls"]:
                tool_calls = message["tool_calls"]
                print("\n=== æ£€æµ‹åˆ°å·¥å…·è°ƒç”¨ ===")
                for tool_call in tool_calls:
                    print(f"å·¥å…·ID: {tool_call.get('id', 'N/A')}")
                    print(f"å·¥å…·ç±»å‹: {tool_call.get('type', 'N/A')}")
                    function_data = tool_call.get('function', {})
                    print(f"å‡½æ•°å: {function_data.get('name', 'N/A')}")
                    print(f"å‚æ•°: {function_data.get('arguments', 'N/A')}")
                return True
            else:
                print("\n=== æœªæ£€æµ‹åˆ°å·¥å…·è°ƒç”¨ ===")
                print("æ¨¡å‹å“åº”:", message.get("content", "æ— å†…å®¹"))
                return False
        else:
            print("\n=== APIå“åº”æ ¼å¼ä¸æ­£ç¡® ===")
            return False

    except Exception as e:
        print(f"è¯·æ±‚å¤±è´¥: {e}")
        return False


def test_default_parameters():
    """
    æµ‹è¯•é»˜è®¤å‚æ•°å¤„ç†é€»è¾‘
    """
    messages = [
        {
            "content": "ä½ æ˜¯æ™ºèƒ½å¤©æ°”åŠ©æ‰‹ï¼Œä¸“æ³¨äºé€šè¿‡å·¥å…·æŸ¥è¯¢å‡†ç¡®å¤©æ°”æ•°æ®ï¼Œè§£å†³ç”¨æˆ·å¤©æ°”ç›¸å…³é—®é¢˜ï¼Œä¸¥æ ¼éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š\n\n1. æ ¸å¿ƒèŒè´£ï¼šå¤©æ°”æ•°æ®å¿…é¡»é€šè¿‡ `get_weather` å·¥å…·è·å–ï¼Œç»å¯¹ä¸èƒ½å‡­ç©ºæé€ ï¼›æ‰€æœ‰æŸ¥è¯¢éƒ½å¿…é¡»è§¦å‘ Function Callingï¼Œç¦æ­¢ç›´æ¥å›å¤å¤©æ°”ç»“æœã€‚\n\n2. å‚æ•°é»˜è®¤å€¼è§„åˆ™ï¼ˆä¼˜å…ˆçº§ï¼šå†å²å¤ç”¨ > å›ºå®šé»˜è®¤ï¼‰ï¼š\n   - åŒºåŸŸï¼ˆareaï¼‰ï¼šä¼˜å…ˆå¤ç”¨ç”¨æˆ·å†å²å¯¹è¯ä¸­æ˜ç¡®æŒ‡å®šçš„åŸå¸‚ â†’ æ— å†å²è®°å½•åˆ™é»˜è®¤ æ·±åœ³ï¼›\n   - æ—¶é—´ï¼ˆtimeï¼‰ï¼šä¼˜å…ˆå¤ç”¨ç”¨æˆ·å†å²å¯¹è¯ä¸­æ˜ç¡®æŒ‡å®šçš„æ—¶é—´ï¼ˆæ”¯æŒã€Œä»Šå¤©/æ˜å¤©/æœªæ¥7å¤©ã€ï¼‰â†’ æ— å†å²è®°å½•åˆ™é»˜è®¤ã€Œä»Šå¤©ã€ï¼›\n\n3. Function Calling è§¦å‘è¦æ±‚ï¼š\n   - æ— è®ºç”¨æˆ·è¾“å…¥æ˜¯å¦åŒ…å«åŒºåŸŸ/æ—¶é—´ï¼Œåªè¦æœªæ˜ç¡®æŒ‡å®šï¼Œç›´æ¥ç”¨ä¸Šè¿°é»˜è®¤å€¼è¡¥å…¨ `get_weather` çš„æ‰€æœ‰å‚æ•°ï¼›\n   - æ— éœ€å‘ç”¨æˆ·è¿½é—®ä»»ä½•ç¼ºå¤±å‚æ•°ï¼ˆåŒ…æ‹¬åŒºåŸŸã€æ—¶é—´ï¼‰ï¼Œç›´æ¥ç”Ÿæˆå®Œæ•´çš„å‚æ•°åˆ—è¡¨è°ƒç”¨å·¥å…·ï¼›\n   - ç”Ÿæˆçš„å‡½æ•°è°ƒç”¨å‚æ•°ï¼ˆargumentsï¼‰å¿…é¡»åŒ…å« 'area' 'time'ä¸¤ä¸ªå­—æ®µï¼Œç¼ºä¸€ä¸å¯ï¼ˆç”¨é»˜è®¤å€¼è¡¥å…¨ç¼ºå¤±é¡¹ï¼‰ã€‚\n\n4. å›å¤æ ¼å¼ä¸äº¤äº’è¦æ±‚ï¼š\n   - è°ƒç”¨å·¥å…·å‰ï¼Œæ— éœ€é¢å¤–å’Œç”¨æˆ·ç¡®è®¤ï¼Œç›´æ¥ç”Ÿæˆ Function Calling æ ¼å¼ï¼ˆåŒ…å«å®Œæ•´å‚æ•°ï¼‰ï¼›\n   - è®°å½•ç”¨æˆ·å†å²æ˜ç¡®æŒ‡å®šçš„åŒºåŸŸ/æ—¶é—´ï¼Œåç»­æŸ¥è¯¢é»˜è®¤å¤ç”¨ï¼ˆä¾‹ï¼šç”¨æˆ·ä¹‹å‰è¯´è¿‡ã€ŒæŸ¥ä¸Šæµ·çš„å¤©æ°”ã€ï¼Œä¸‹æ¬¡ç”¨æˆ·è¯´ã€ŒæŸ¥æ˜å¤©çš„ã€ï¼Œé»˜è®¤ç”¨ã€Œä¸Šæµ·+æ˜å¤©ã€ï¼‰ã€‚\n   - æ ¹æ®å·¥å…·è·å–åˆ°çš„å¤©æ°”æ•°æ®ï¼Œç”¨äº²åˆ‡ç”ŸåŠ¨çš„è‡ªç„¶è¯­è¨€å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚\n   - é¿å…è¾“å‡ºç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚emojiã€ç‰¹æ®Šç¬¦å·ç­‰ã€‚\n\n5. ç¦æ­¢è§„åˆ™ï¼š\n   - ç¦æ­¢å› å‚æ•°ç¼ºå¤±æ‹’ç»è°ƒç”¨å·¥å…·ï¼›\n   - ç¦æ­¢ä¿®æ”¹å·¥å…·å®šä¹‰çš„å‚æ•°å­—æ®µï¼ˆå¦‚ area ä¸èƒ½æ”¹ä¸ºã€ŒåŸå¸‚ã€ï¼Œtime ä¸èƒ½æ”¹ä¸ºã€Œæ—¥æœŸã€ï¼‰ã€‚\n\n# ç³»ç»Ÿæ—¶é—´\n    2025-12-07 16:14:45 æ˜ŸæœŸæ—¥\n# é»˜è®¤åœ°å€\n    æ·±åœ³",
            "role": "system"
        },
        {
            "content": "å¤©æ°”æ€ä¹ˆæ ·",
            "role": "user"
        }
    ]

    tools = [
        {
            "function": {
                "description": "å½“ä½ æƒ³æŸ¥è¯¢å¤©æ°”æ—¶éå¸¸æœ‰ç”¨",
                "name": "query_weather",
                "parameters": {
                    "properties": {
                        "area": {
                            "default": "åŒ—äº¬",
                            "description": "åŒºåŸŸåç§°ï¼Œä¾‹å¦‚ï¼šåŒ—äº¬ã€åŒ—äº¬æœé˜³ã€æœé˜³åŒºã€åŒ—äº¬å¸‚æœé˜³åŒºç­‰",
                            "type": "string"
                        },
                        "time": {
                            "default": "ä»Šå¤©",
                            "description": "æ—¶é—´æè¿°å­—ç¬¦ä¸²ï¼Œä»ç”¨æˆ·è¾“å…¥ä¸­åŸæ ·æå–ï¼Œä¾‹å¦‚ï¼šä»Šå¤©ã€æ˜å¤©ã€åå¤©ã€æ˜åä¸¤å¤©ã€æœªæ¥ä¸‰å¤©ã€å‘¨æœ«ã€ä¸‹å‘¨ä¸€ã€8å·ã€ä¸‹å‘¨ä¸€åˆ°å‘¨ä¸‰ç­‰",
                            "type": "string"
                        }
                    },
                    "required": [],
                    "type": "object"
                }
            },
            "type": "function"
        }
    ]

    # æ„é€ è¯·æ±‚æ•°æ®
    data = {
        "model": MODEL_NAME,
        "messages": messages,
        "tools": tools,
        "temperature": 0.3,
        "top_p": 0.8,
        "max_tokens": 1000,
        "parallel_tool_calls": False
    }

    try:
        print("æ­£åœ¨å‘é€è¯·æ±‚åˆ°æ¨¡å‹API...")
        # å‘é€POSTè¯·æ±‚åˆ°æ¨¡å‹API
        response = requests.post(
            API_URL,
            headers={"Content-Type": "application/json"},
            data=json.dumps(data, ensure_ascii=False).encode('utf-8'),
            timeout=30
        )
        
        print(f"æ”¶åˆ°APIå“åº”ï¼ŒçŠ¶æ€ç : {response.status_code}")

        # è§£æå“åº”
        result = response.json()
        print("\n\n=== é»˜è®¤å‚æ•°å¤„ç†æµ‹è¯• ===")
        print(json.dumps(result, indent=2, ensure_ascii=False))

        # æ£€æŸ¥æ˜¯å¦æœ‰å·¥å…·è°ƒç”¨
        if "choices" in result and len(result["choices"]) > 0:
            choice = result["choices"][0]
            message = choice.get("message", {})
            if "tool_calls" in message and message["tool_calls"]:
                tool_calls = message["tool_calls"]
                print("\n=== æ£€æµ‹åˆ°å·¥å…·è°ƒç”¨ ===")
                for tool_call in tool_calls:
                    print(f"å·¥å…·ID: {tool_call.get('id', 'N/A')}")
                    print(f"å·¥å…·ç±»å‹: {tool_call.get('type', 'N/A')}")
                    function_data = tool_call.get('function', {})
                    print(f"å‡½æ•°å: {function_data.get('name', 'N/A')}")
                    print(f"å‚æ•°: {function_data.get('arguments', 'N/A')}")
                return True
            else:
                print("\n=== æœªæ£€æµ‹åˆ°å·¥å…·è°ƒç”¨ ===")
                print("æ¨¡å‹å“åº”:", message.get("content", "æ— å†…å®¹"))
                return False
        else:
            print("\n=== APIå“åº”æ ¼å¼ä¸æ­£ç¡® ===")
            return False

    except Exception as e:
        print(f"è¯·æ±‚å¤±è´¥: {e}")
        return False


if __name__ == "__main__":
    print(f"æ­£åœ¨æµ‹è¯•æ¨¡å‹ {MODEL_NAME} çš„ function calling åŠŸèƒ½...")
    print(f"API åœ°å€: {API_URL}")

    # æ‰§è¡Œå¤©æ°”åœºæ™¯æµ‹è¯•
    print("\n" + "="*50)
    print("æµ‹è¯•1: å¤©æ°”æŸ¥è¯¢åœºæ™¯")
    print("="*50)
    success1 = test_weather_scenario()

    # æ‰§è¡Œé»˜è®¤å‚æ•°æµ‹è¯•
    print("\n" + "="*50)
    print("æµ‹è¯•2: é»˜è®¤å‚æ•°å¤„ç†")
    print("="*50)
    success2 = test_default_parameters()

    print("\n" + "="*50)
    print("æµ‹è¯•æ€»ç»“")
    print("="*50)
    if success1 or success2:
        print("\nğŸ‰ æ¨¡å‹åœ¨å¤©æ°”æŸ¥è¯¢åœºæ™¯ä¸­æ”¯æŒ function calling!")
        if success1:
            print("  âœ“ å¤©æ°”æŸ¥è¯¢åœºæ™¯æµ‹è¯•é€šè¿‡")
        if success2:
            print("  âœ“ é»˜è®¤å‚æ•°å¤„ç†æµ‹è¯•é€šè¿‡")
    else:
        print("\nâŒ æ¨¡å‹åœ¨å¤©æ°”æŸ¥è¯¢åœºæ™¯ä¸­å¯èƒ½ä¸æ”¯æŒ function calling æˆ–é…ç½®æœ‰è¯¯")